<!-- Responsive panel example-->
<% if Event.where(:calendar_id => params[:id]).count !=0 %>
<div class="row">
  <div class="col-sm-offset-1 col-sm-10 col-md-offset-2 col-md-8">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title"><%= @calendar.title %></h3>
      </div>
      <div class="panel-body">
        <div class="row">
          <div class="col-md-12">
            <dl class="dl-horizontal">

              <dt>Description</dt>
              <dd><%= @calendar.description %></dd>

            </dl>
            <div class="btn-group btn-group-justified">
              <a href="/calendars" class="btn btn-primary">
                <i class="fa fa-chevron-left"></i>
              </a>

              <a href="/calendars/<%= @calendar.id %>/edit" class="btn btn-warning">
                <i class="fa fa-edit"></i>
              </a>

              <a href="/delete_calendar/<%= @calendar.id %>" class="btn btn-danger" rel="nofollow">
                <i class="fa fa-trash-o"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- End responsive panel example -->

<!-- Responsive panel example -->

<% @event = Event.new %>

<% if @event.errors.any? %>
  <% @event.errors.full_messages.each do |message| %>
    <div class="alert alert-dismissable alert-danger">
      <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
      <%= message %>
    </div>
  <% end %>
<% end %>

<div class="row">
  <div class="col-sm-offset-1 col-sm-10 col-md-offset-2 col-md-8">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Add Event</h3>
      </div>
      <div class="panel-body">
        <form action="/create_event" method="post" class="form-horizontal">
          <!-- Hidden input for authenticity token to protect from forgery -->
          <input name="authenticity_token" type="hidden" value="<%= form_authenticity_token %>">

          <!-- Label and input for user_id -->

          <input name="calendar_id" type ="hidden" value="<%= @calendar.id %>">

          <!-- Label and input for name -->
          <div class="form-group">
            <label for="name" class="col-sm-2 control-label">
              Name
            </label>
            <div class="col-sm-10">
              <input type="text" id="name" name="name" placeholder="Name" class="form-control" value="<%= @event.name %>">
            </div>
          </div>

          <!-- Label and input for starting_time -->
          <div class="form-group">
            <label for="starting_time" class="col-sm-2 control-label">Starting Time</label>
            <div class="col-sm-10">
              <div class="input-group date datetimepicker">
                <input name="starting_time" type="text" class="form-control" id="starting_time">
                <span class="input-group-addon">
                  <i class="fa fa-calendar"></i>
                </span>
              </div>
            </div>
          </div>

          <!-- Label and input for ending_time -->
          <div class="form-group">
            <label for="ending_time" class="col-sm-2 control-label">Ending Time</label>
            <div class="col-sm-10">
              <div class="input-group date datetimepicker">
                <input name="ending_time" type="text" class="form-control" id="ending_time">
                <span class="input-group-addon">
                  <i class="fa fa-calendar"></i>
                </span>
              </div>
            </div>
          </div>

          <!-- Label and input for description -->
          <div class="form-group">
            <label for="description" class="col-sm-2 control-label">
              Description
            </label>
            <div class="col-sm-10">
              <textarea id="description" name="description" placeholder="Description" class="form-control" rows="3"><%= @event.description %></textarea>
            </div>
          </div>

          <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
              <button class="btn btn-success">
                Create Event
              </button>
              or
              <a href="/events">Cancel</a>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<% @events = Event.where(:calendar_id => params[:id]) %>

<div class="row isotope-container">
<% @events.each do |event| %>
  <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 isotope-item">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title"><%= event.name.upcase %></h3>
      </div>
      <div class="panel-body">
        <dl>
          <dt>User</dt>
          <dd><%= event.user.username %></dd>

          <dt>Calendar</dt>
          <dd><%= event.calendar.title %></dd>

          <dt>Name</dt>
          <dd><%= event.name %></dd>

          <dt>Starting time</dt>
          <dd><%= local_time(event.starting_time,"%l:%M%P on %B %e, %Y") %></dd>

          <dt>Ending time</dt>
          <dd><%= local_time(event.ending_time,"%l:%M%P on %B %e, %Y") %></dd>

          <dt>Description</dt>
          <dd><%= event.description %></dd>

        </dl>
        <div class="btn-group btn-group-justified">
          <a href="/events/<%= event.id %>" class="btn btn-primary">
            <i class="fa fa-search-plus"></i>
          </a>

          <a href="/events/<%= event.id %>/edit" class="btn btn-warning">
            <i class="fa fa-edit"></i>
          </a>

          <a href="/delete_event/<%= event.id %>" class="btn btn-danger" rel="nofollow">
            <i class="fa fa-trash-o"></i>
          </a>
        </div>
      </div>
    </div>
  </div>
<% end %>
</div>
<% else %>
howdy!
<% end %>
<!-- You can ignore the following. It's a quick and dirty example of how to get a Pinterest-style layout with quick search. -->
<!-- JavaScript for Isotope layout and quicksearch -->
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/3.1.8/imagesloaded.pkgd.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery.isotope/2.0.0/isotope.pkgd.min.js"></script>
<script>
  $(function() {
    // quick search regex
    var qsRegex;

    // init Isotope
    var $container = $('.isotope-container');

    $container.imagesLoaded(function() {
      $container.isotope({
        itemSelector: '.isotope-item',
        layoutMode: 'masonry',
        filter: function() {
          return qsRegex ? $(this).text().match( qsRegex ) : true;
        }
      })
    });

    // use value of search field to filter
    var $quicksearch = $('#quicksearch').keyup( debounce( function() {
      qsRegex = new RegExp( $quicksearch.val(), 'gi' );
      $container.isotope();
    }, 200 ) );

  });

  // debounce so filtering doesn't happen every millisecond
  function debounce( fn, threshold ) {
    var timeout;
    return function debounced() {
      if ( timeout ) {
        clearTimeout( timeout );
      }
      function delayed() {
        fn();
        timeout = null;
      }
      timeout = setTimeout( delayed, threshold || 100 );
    }
  }
</script>

<!-- End responsive, Isotope-based layout example -->


<!-- End responsive panel example -->
